# Configuración para microservicios ejecutándose en host (no Docker)
# Conectando a servicios base en Docker

# Base de datos MongoDB (Replica Set en Docker)
DATABASE_URL="mongodb://bookly:bookly123@localhost:27017,localhost:27018,localhost:27019/bookly?replicaSet=bookly-rs&authSource=bookly"
MONGODB_HOST="localhost"
MONGODB_PORT=27017
MONGODB_DATABASE="bookly"
MONGODB_USERNAME="bookly"
MONGODB_PASSWORD="bookly123"
MONGODB_REPLICA_SET="bookly-rs"

# Redis (en Docker)
REDIS_URL="redis://localhost:6379"
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_PASSWORD=""

# RabbitMQ (en Docker)
RABBITMQ_URL="amqp://bookly:bookly123@localhost:5672"
RABBITMQ_HOST="localhost"
RABBITMQ_PORT=5672
RABBITMQ_USER="bookly"
RABBITMQ_PASS="bookly123"
RABBITMQ_VHOST="/"

# JWT Configuration
JWT_SECRET="bookly-jwt-secret-key-2024"
JWT_EXPIRATION="24h"

# Configuración de la aplicación
NODE_ENV="development"
PORT=3001

# =============================================================================
# API GATEWAY CONFIGURATION
# =============================================================================
# Gateway port and settings
API_GATEWAY_PORT=3000
API_GATEWAY_HOST=localhost
API_GLOBAL_PREFIX=api
API_GATEWAY_VERSION=1.0.0

# Load balancing strategy
LOAD_BALANCING_STRATEGY=round-robin
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_RETRIES=3

# Rate limiting
GLOBAL_RATE_LIMIT_TTL=60
GLOBAL_RATE_LIMIT_MAX=1000
USER_RATE_LIMIT_TTL=60
USER_RATE_LIMIT_MAX=100
LOGIN_RATE_LIMIT_TTL=900
LOGIN_RATE_LIMIT_MAX=5
REGISTER_RATE_LIMIT_TTL=3600
REGISTER_RATE_LIMIT_MAX=3

# Cache settings
CACHE_ENABLED=true
CACHE_DEFAULT_TTL=300000
CACHE_MAX_SIZE=1000
RESOURCES_CACHE_TTL=600000
RESOURCES_CACHE_ENABLED=true
AVAILABILITY_CACHE_TTL=60000
AVAILABILITY_CACHE_ENABLED=true

# Security settings
HELMET_ENABLED=true
CSP_ENABLED=true
CORS_ORIGIN=http://localhost:3000,http://localhost:80

# Swagger settings
SWAGGER_ENABLED=true
SWAGGER_PATH=api/docs
SWAGGER_TITLE=Bookly API Gateway
SWAGGER_DESCRIPTION=Unified API Gateway for Bookly reservation system
SWAGGER_VERSION=1.0.0
SWAGGER_AGGREGATE=true

# Monitoring settings
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics
OTEL_ENABLED=true
OTEL_ENDPOINT=http://localhost:4317

# Configuración de logging
LOG_LEVEL="debug"
LOG_FORMAT="json"



# Configuraciones opcionales (pueden estar vacías para desarrollo)

# =============================================================================
# OAUTH GOOGLE (SSO)
# =============================================================================
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=http://localhost:3001/auth/oauth/google/callback

# =============================================================================
# GOOGLE SERVICES API (OPCIONAL)
# =============================================================================
# Google Sheets API (para importación masiva de recursos)
GOOGLE_SHEETS_API_KEY=your-google-sheets-api-key
GOOGLE_SHEETS_CLIENT_EMAIL=your-service-account@your-project.iam.gserviceaccount.com
GOOGLE_SHEETS_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nyour-private-key\n-----END PRIVATE KEY-----\n"

# Google Calendar API (para integración de calendarios)
GOOGLE_CALENDAR_CLIENT_ID=your-calendar-client-id.apps.googleusercontent.com
GOOGLE_CALENDAR_CLIENT_SECRET=your-calendar-client-secret
GOOGLE_CALENDAR_REDIRECT_URI=http://localhost:3003/calendar/google/callback

# =============================================================================
# MICROSOFT OUTLOOK API (OPCIONAL)
# =============================================================================
OUTLOOK_CLIENT_ID=your-outlook-client-id
OUTLOOK_CLIENT_SECRET=your-outlook-client-secret
OUTLOOK_REDIRECT_URI=http://localhost:3003/calendar/outlook/callback

# =============================================================================
# WHATSAPP API (OPCIONAL)
# =============================================================================
WHATSAPP_API_URL=https://graph.facebook.com/v18.0
WHATSAPP_API_TOKEN=your-whatsapp-api-token
WHATSAPP_PHONE_NUMBER_ID=your-phone-number-id

# =============================================================================
# CONFIGURACIÓN EMAIL SMTP
# =============================================================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@ufps.edu.co
SMTP_PASS=your-app-password
EMAIL_FROM=noreply@bookly.ufps.edu.co

# =============================================================================
# OBSERVABILIDAD - SENTRY
# =============================================================================
SENTRY_SECRET_KEY=bookly-sentry-secret-key-change-in-production-at-least-32-chars
SENTRY_DB_USER=sentry
SENTRY_DB_PASSWORD=sentry123
SENTRY_DB_NAME=sentry
SENTRY_DSN=http://admin@bookly.local:password@sentry-web:9000/1
SENTRY_MAIL_HOST=localhost
SENTRY_SERVER_EMAIL=sentry@bookly.local
SENTRY_EMAIL_HOST=localhost
SENTRY_EMAIL_PORT=25
SENTRY_EMAIL_USE_TLS=false

# =============================================================================
# OBSERVABILIDAD - SIGNOZ
# =============================================================================
SIGNOZ_JWT_SECRET=bookly-signoz-jwt-secret-change-in-production
CLICKHOUSE_USER=signoz
CLICKHOUSE_PASSWORD=signoz123
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318

# =============================================================================
# URLS DE SERVICIOS (INTER-SERVICE COMMUNICATION)
# =============================================================================
# Para microservicios en host (localhost)
AUTH_SERVICE_URL=http://localhost:3001
RESOURCES_SERVICE_URL=http://localhost:3002
AVAILABILITY_SERVICE_URL=http://localhost:3003
STOCKPILE_SERVICE_URL=http://localhost:3004
REPORTS_SERVICE_URL=http://localhost:3005

# Gateway microservices configuration and Circuit Breakers
AUTH_SERVICE_TIMEOUT=5000
AUTH_SERVICE_RETRIES=3
AUTH_CIRCUIT_BREAKER_ENABLED=true
AUTH_CIRCUIT_BREAKER_THRESHOLD=5
AUTH_CIRCUIT_BREAKER_TIMEOUT=60000

RESOURCES_SERVICE_TIMEOUT=5000
RESOURCES_SERVICE_RETRIES=3
RESOURCES_CIRCUIT_BREAKER_ENABLED=true
RESOURCES_CIRCUIT_BREAKER_THRESHOLD=5
RESOURCES_CIRCUIT_BREAKER_TIMEOUT=60000

AVAILABILITY_SERVICE_TIMEOUT=5000
AVAILABILITY_SERVICE_RETRIES=3
AVAILABILITY_CIRCUIT_BREAKER_ENABLED=true
AVAILABILITY_CIRCUIT_BREAKER_THRESHOLD=5
AVAILABILITY_CIRCUIT_BREAKER_TIMEOUT=60000

STOCKPILE_SERVICE_TIMEOUT=5000
STOCKPILE_SERVICE_RETRIES=3
STOCKPILE_CIRCUIT_BREAKER_ENABLED=true
STOCKPILE_CIRCUIT_BREAKER_THRESHOLD=5
STOCKPILE_CIRCUIT_BREAKER_TIMEOUT=60000

REPORTS_SERVICE_TIMEOUT=5000
REPORTS_SERVICE_RETRIES=3
REPORTS_CIRCUIT_BREAKER_ENABLED=true
REPORTS_CIRCUIT_BREAKER_THRESHOLD=5
REPORTS_CIRCUIT_BREAKER_TIMEOUT=60000

# Proxy settings
PROXY_TIMEOUT=30000
PROXY_RETRIES=3
PROXY_KEEP_ALIVE=true
PROXY_MAX_SOCKETS=100

# =============================================================================
# CONFIGURACIÓN DE RECURSOS
# =============================================================================
# Directorios de archivos
PDF_TEMPLATE_DIR=/app/templates
EXPORT_DIR=/app/exports
MAX_EXPORT_RECORDS=10000

# =============================================================================
# CONFIGURACIÓN DE MEMORIA
# =============================================================================
MEMORY_HEAP_THRESHOLD_MB=2048
MEMORY_RSS_THRESHOLD_MB=2048